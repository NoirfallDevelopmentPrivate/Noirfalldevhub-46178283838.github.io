(this["webpackJsonpwarpv-configurator-chakra"]=this["webpackJsonpwarpv-configurator-chakra"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(27),i=n.n(r),o=n(5),s=n(173),c=n(194),l=n(74),d=n(170),u=n(19),b=n(53),g=n(7),j=n(196),h=n(168),m=n(171),p=n(175),f=n(195),O="Int",x="Radio",v=[{macroType:"var",readableName:"CPU cores",verilogName:"NUM_CORES",defaultValue:1,jsonKey:"cores",type:O,min:1,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Number of cores"},{macroType:"var",readableName:"VCs",verilogName:"NUM_VCS",defaultValue:2,jsonKey:"vcs",type:O,min:2,validator:function(e){return e>=2},configurationCategory:"CPU",description:"VCs (meaningful if > 1 core)"},{macroType:"var",readableName:"Priority levels",verilogName:"NUM_PRIOS",defaultValue:2,jsonKey:"prios",type:O,min:2,validator:function(e){return e>=2},configurationCategory:"CPU",description:"Number of priority levels in the NoC"},{macroType:"var",readableName:"Max Packet Size",verilogName:"MAX_PACKET_SIZE",defaultValue:8,jsonKey:"max_packet_size",type:O,min:3,validator:function(e){return e>=3},configurationCategory:"CPU",description:"Max number of payload flits in a packet"},{macroType:"var",readableName:"Soft reset",verilogName:"soft_reset",defaultValue:!1,jsonKey:"soft_reset",type:Boolean,configurationCategory:"CPU",description:"A hook for a software-controlled reset. None by default"},{macroType:"var",readableName:"CPU Blocked?",verilogName:"cpu_blocked",defaultValue:!1,jsonKey:"cpu_blocked",type:Boolean,configurationCategory:"CPU",description:"A hook for CPU back-pressure in M4_REG_RD_STAGE. Various sources of back-pressure can add to this expression."},{macroType:"var",readableName:"Branch prediction?",verilogName:"BRANCH_PRED",defaultValue:"fallthrough",jsonKey:"branch_pred",type:x,possibleValues:["fallthrough","two_bit"],validator:function(e,t){return t.possibleValues.includes(e)},configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_REPLAY_BUBBLE",verilogName:"EXTRA_REPLAY_BUBBLE",defaultValue:0,jsonKey:"extra_replay_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_PRED_TAKEN_BUBBLE",verilogName:"EXTRA_PRED_TAKEN_BUBBLE",defaultValue:0,jsonKey:"extra_pred_taken_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_JUMP_BUBBLE",verilogName:"EXTRA_JUMP_BUBBLE",defaultValue:0,jsonKey:"extra_jump_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_BRANCH_BUBBLE",verilogName:"EXTRA_BRANCH_BUBBLE",defaultValue:0,jsonKey:"extra_branch_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_INDIRECT_JUMP_BUBBLE",verilogName:"EXTRA_INDIRECT_JUMP_BUBBLE",defaultValue:0,jsonKey:"extra_indirect_jump_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_NON_PIPELINED_BUBBLE",verilogName:"EXTRA_NON_PIPELINED_BUBBLE",defaultValue:1,jsonKey:"extra_non_pipelined_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"EXTRA_TRAP_BUBBLE",verilogName:"EXTRA_TRAP_BUBBLE",defaultValue:1,jsonKey:"extra_trap_bubble",type:O,min:0,validator:function(e){return e>=0},max:1,configurationCategory:"CPU"},{macroType:"var",readableName:"Next PC Stage",verilogName:"NEXT_PC_STAGE",defaultValue:0,jsonKey:"next_pc_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Determining fetch PC for the NEXT instruction (not this one)."},{macroType:"var",readableName:"Fetch Stage",verilogName:"FETCH_STAGE",defaultValue:0,jsonKey:"fetch_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Instruction fetch."},{macroType:"var",readableName:"Decode Stage",verilogName:"DECODE_STAGE",defaultValue:0,jsonKey:"decode_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Instruction decode."},{macroType:"var",readableName:"Branch Prediction Stage",verilogName:"BRANCH_PRED_STAGE",defaultValue:0,jsonKey:"branch_pred_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Branch predict (taken/not-taken). Currently, we mispredict to a known branch target, so branch prediction is only relevant if target is computed before taken/not-taken is known. For other ISAs prediction is forced to fallthrough, and there is no pred-taken redirect."},{macroType:"var",readableName:"Register Read Stage",verilogName:"REG_RD_STAGE",defaultValue:0,jsonKey:"register_rd_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Register file read"},{macroType:"var",readableName:"Execute Stage",verilogName:"EXECUTE_STAGE",defaultValue:0,jsonKey:"execute_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Operation execution."},{macroType:"var",readableName:"Result Stage",verilogName:"RESULT_STAGE",defaultValue:0,jsonKey:"result_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Select execution result."},{macroType:"var",readableName:"Register Write Stage",verilogName:"REG_WR_STAGE",defaultValue:0,jsonKey:"register_wr_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Register file write."},{macroType:"var",readableName:"Memory Write Stage",verilogName:"MEM_WR_STAGE",defaultValue:0,jsonKey:"mem_wr_stage",type:O,min:0,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Memory write."},{macroType:"var",readableName:"LD Return Align",verilogName:"LD_RETURN_ALIGN",defaultValue:0,jsonKey:"ld_return_align",type:O,validator:function(e){return e>=0},configurationCategory:"CPU",description:"Alignment of load return pseudo-instruction into |mem pipeline. If |mem stages reflect nominal alignment w/ load instruction, this is the nominal load latency."}],S=n(172),y=n(187),_=n(123),C=n(119),E=n(176),w=n(92),T=n(186),I=n(2);function P(e,t,n){if(e)navigator.clipboard.writeText(n);else{var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}function N(e){var t=e.disclosure,n=e.url,a=t.isOpen,r=t.onClose;return Object(I.jsxs)(T.a,{isOpen:a,onClose:r,children:[Object(I.jsx)(T.g,{}),Object(I.jsxs)(T.d,{children:[Object(I.jsx)(T.f,{children:"Your project is ready."}),Object(I.jsx)(T.c,{}),Object(I.jsx)(T.b,{children:Object(I.jsx)(h.a,{children:"To avoid this confirmation in the future, disable your browser's pop-up blocker for this site."})}),Object(I.jsxs)(T.e,{children:[Object(I.jsx)(C.a,{variant:"ghost",mr:3,onClick:r,children:"Close"}),Object(I.jsx)(C.a,{colorScheme:"blue",onClick:function(){return window.open(n)},children:"Open in Makerchip"})]})]})]})}function A(e,t,n){t(!0);var a=new URLSearchParams;a.append("source",e),fetch("https://warp-v.makerchip.com/project/public",{method:"POST",body:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()})).then((function(e){var a=e.url;!function(e,t,n){var a=window.open(e,t);a&&!a.closed&&"undefined"!=typeof a.closed||n(e)}("https://warp-v.makerchip.com".concat(a),"_blank",n),t(!1)}))}var R=n(191),D="your_warpv_core_configuration.m4",V="your_warpv_core_tlv.tlv",k="your_warpv_core_verilog.sv";function U(e){var t=e.coreJson,n=e.tlvForJson,r=e.macrosForJson,i=e.sVForJson,s=e.selectedFile,c=e.setSelectedFile,l=e.setDiscloureAndUrl,u=Object(b.a)(e,["coreJson","tlvForJson","macrosForJson","sVForJson","selectedFile","setSelectedFile","setDiscloureAndUrl"]),O=Object(a.useState)(!1),x=Object(o.a)(O,2),v=x[0],T=x[1];if(!t||!r||!i)return null;function N(e){c(e)}function U(e){"m4"===s?P(e,D,r.join("\n")):"tlv"===s?P(e,V,n):"rtl"===s&&P(e,k,i)}function B(e){return e.replaceAll(/`include ".+"\s+\/\/\s+From: "(.+)"/gm,"m4_sv_include_url(['$1']) // Originally: $&")}return Object(I.jsxs)(d.a,Object(g.a)(Object(g.a)({mx:"auto",maxW:"100vh",mb:30},u),{},{children:[Object(I.jsxs)(d.a,{mb:3,children:[Object(I.jsx)(m.a,{size:"lg",children:"Core Details"}),Object(I.jsx)(h.a,{mt:1,children:"Your CPU is constructed in the following steps."})]}),Object(I.jsxs)(f.a,{mb:10,flexWrap:"wrap",children:[Object(I.jsxs)(f.a,{mb:5,mx:"auto",children:[Object(I.jsxs)(S.a,{onClick:function(){return N("m4")},children:[Object(I.jsx)(h.a,{backgroundColor:"m4"===s?"#CDCDCD":null,borderWidth:1,borderRadius:15,p:2,textAlign:"center",mb:2,children:"Macro Configuration"}),Object(I.jsx)(j.a,{src:"macropreviewlight.png",maxW:200,mx:"auto"})]}),Object(I.jsx)(y.a,{label:"A macro-preprocessor (M4) applies parameters and instantiates components.",children:Object(I.jsxs)(p.a,{centerContent:!0,mx:0,px:0,width:30,children:[Object(I.jsx)(_.a,{as:w.a,fontSize:"30px"}),Object(I.jsx)(R.a,{mx:"auto",marginLeft:"auto"})]})})]}),Object(I.jsxs)(f.a,{mb:5,mx:"auto",children:[Object(I.jsxs)(S.a,{onClick:function(){return N("tlv")},children:[Object(I.jsx)(h.a,{backgroundColor:"tlv"===s?"#CDCDCD":null,borderWidth:1,borderRadius:15,p:1,textAlign:"center",children:"Transaction-Level Design (TL-Verilog)"}),Object(I.jsx)(j.a,{src:"tlv-tlvpreview.png",maxW:200,mx:"auto"})]}),Object(I.jsx)(y.a,{label:"Redwood EDA, LLC's SandPiper(TM) SaaS Edition expands your Transaction-Level Verilog code into Verilog.",children:Object(I.jsxs)(p.a,{centerContent:!0,mx:0,px:0,width:30,children:[Object(I.jsx)(_.a,{as:w.a,fontSize:"30px"}),Object(I.jsx)(R.a,{mx:"auto",marginLeft:"auto"})]})})]}),Object(I.jsx)(f.a,{mx:"auto",children:Object(I.jsxs)(S.a,{onClick:function(){return N("rtl")},children:[Object(I.jsx)(h.a,{backgroundColor:"rtl"===s?"#CDCDCD":null,borderWidth:1,borderRadius:15,p:2,textAlign:"center",mb:2,children:"RTL (Verilog)"}),Object(I.jsx)(j.a,{src:"rtlpreview.png",maxW:200,mx:"auto"})]})})]}),Object(I.jsxs)(d.a,{maxW:"100vh",children:[!s&&Object(I.jsx)(h.a,{children:"No file selected"}),s&&Object(I.jsxs)(I.Fragment,{children:["configuration"===s&&Object(I.jsx)(h.a,{mb:2,children:Object(I.jsx)("b",{children:"Core Configuration"})}),"m4"===s&&Object(I.jsx)(h.a,{mb:2,children:Object(I.jsx)("b",{children:D})}),"tlv"===s&&Object(I.jsx)(h.a,{mb:2,children:Object(I.jsx)("b",{children:V})}),"rtl"===s&&Object(I.jsx)(h.a,{mb:2,children:Object(I.jsx)("b",{children:k})}),Object(I.jsxs)(f.a,{mb:3,children:[Object(I.jsx)(C.a,{colorScheme:"teal",onClick:function(){U(!1)},children:"Download File"}),Object(I.jsx)(C.a,{colorScheme:"blue",onClick:function(){if("m4"===s)A(r.join("\n"),T,l);else if("tlv"===s)A(B(n).replace("\\TLV_version","\\m5_TLV_version"),T,l);else if("rtl"===s){A(B("\\m5_TLV_version 1d: tl-x.org\n\\SV\n"+i.replaceAll(/`include ".+"\s+\/\/\s+From: "(.+)"/gm,"m4_sv_include_url(['$1']) // Originally: $&")),T,l)}},isDisabled:v,isLoading:v,children:"Edit in Makerchip as Source"}),Object(I.jsx)(C.a,{colorScheme:"teal",onClick:function(){U(!0)},children:"Copy Code"})]}),Object(I.jsxs)(E.a,{as:"pre",borderWidth:3,borderRadius:15,p:2,overflow:"auto",w:"100vh",maxW:"100%",children:["configuration"===s&&Object(I.jsx)(h.a,{children:"Your configuration is determined by your core selections on the homepage."}),"m4"===s&&r.join("\n"),"tlv"===s&&n&&B(n),"rtl"===s&&i&&B(i)]})]})]})]}))}var B=n(190),F=n(198),L=n(49),M=n(177),W=n(120),G=n(197),K=n(178),J=n(121),H=n(192);function z(e){var t,n,a,r,i=e.configuratorGlobalSettings,o=e.setConfiguratorGlobalSettings,s=e.formErrors;return Object(I.jsxs)(d.a,{children:[Object(I.jsxs)(L.a,{isInvalid:s.includes("isa"),mb:4,children:[Object(I.jsx)(M.a,{children:"ISA:"}),Object(I.jsxs)(W.a,{onChange:function(e){o("MIPSI"!==e?Object(g.a)(Object(g.a)({},i),{},{generalSettings:Object(g.a)(Object(g.a)({},i.generalSettings),{},{customInstructionsEnabled:!0,customProgramEnabled:!0,isa:e})}):Object(g.a)(Object(g.a)({},i),{},{generalSettings:Object(g.a)(Object(g.a)({},i.generalSettings),{},{isa:e,customInstructionsEnabled:!1,customProgramEnabled:!1,isaExtensions:[]}),settings:Object(g.a)(Object(g.a)({},i.settings),{},{cores:1})}))},value:i.generalSettings.isa,children:[Object(I.jsxs)(f.b,{direction:"row",children:[Object(I.jsx)(G.a,{value:"RISCV",children:"RISC-V"}),Object(I.jsx)(G.a,{value:"MIPSI",children:"MIPS"})]}),Object(I.jsx)(K.a,{children:"Please select an ISA"})]})]}),Object(I.jsxs)(L.a,{isInvalid:s.includes("depth"),mb:5,children:[Object(I.jsx)(y.a,{label:'Pipeline Depth (updates detailed parameters under "Pipeline")',fontSize:"md",children:Object(I.jsxs)(d.a,{as:"span",borderBottomStyle:"dashed",borderBottomWidth:1.5,children:["Pipeline Depth:",Object(I.jsx)(R.a,{ml:2,mb:1})]})}),Object(I.jsxs)(W.a,{onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{generalSettings:Object(g.a)(Object(g.a)({},i.generalSettings),{},{depth:parseInt(e)})}))},value:i.generalSettings.depth,defaultValue:4,children:[Object(I.jsxs)(f.b,{direction:"row",children:[Object(I.jsx)(G.a,{value:1,children:"1-cyc"}),Object(I.jsx)(G.a,{value:2,children:"2-cyc"}),Object(I.jsx)(G.a,{value:4,children:"4-cyc"}),Object(I.jsx)(G.a,{value:6,children:"6-cyc"}),Object(I.jsx)(G.a,{isDisabled:!0,value:"",children:"Custom Pipeline"})]}),Object(I.jsx)(K.a,{children:"Please select a pipeline depth"})]})]}),"RISCV"===i.generalSettings.isa&&Object(I.jsxs)(L.a,{children:[Object(I.jsx)(M.a,{mb:2,children:Object(I.jsx)(y.a,{label:"RISC-V has a modular design, consisting of alternative base parts, with added optional extensions. The ISA base and its extensions are developed in a collective effort between industry, the research community and educational institutions. The base specifies instructions (and their encoding), control flow, registers (and their sizes), memory and addressing, logic (i.e., integer) manipulation, and ancillaries. The base alone can implement a simplified general-purpose computer, with full software support, including a general-purpose compiler. The standard extensions are specified to work with all of the standard bases, and with each other without conflict.",fontSize:"md",children:Object(I.jsxs)(d.a,{as:"span",borderBottomStyle:"dashed",borderBottomWidth:1.5,children:["ISA Extensions (RISC-V only):",Object(I.jsx)(R.a,{ml:2,mb:1})]})})}),Object(I.jsx)(J.a,{value:i.generalSettings.isaExtensions,onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{generalSettings:Object(g.a)(Object(g.a)({},i.generalSettings),{},{isaExtensions:e})}))},children:Object(I.jsxs)(f.b,{direction:"row",children:[Object(I.jsx)(H.a,{value:"E",isDisabled:"MIPSI"===i.generalSettings.isa,isChecked:null===(t=i.generalSettings.isaExtensions)||void 0===t?void 0:t.includes("E"),children:Object(I.jsx)(y.a,{label:"Base Integer Instruction Set (embedded)",children:Object(I.jsxs)(d.a,{as:"span",children:["E ",Object(I.jsx)(R.a,{})]})})}),Object(I.jsx)(H.a,{value:"M",isDisabled:"MIPSI"===i.generalSettings.isa,isChecked:null===(n=i.generalSettings.isaExtensions)||void 0===n?void 0:n.includes("M"),children:Object(I.jsx)(y.a,{label:"Standard Extension for Integer Multiplication and Division",children:Object(I.jsxs)(d.a,{as:"span",children:["M ",Object(I.jsx)(R.a,{})]})})}),Object(I.jsx)(H.a,{value:"F",isDisabled:"MIPSI"===i.generalSettings.isa,isChecked:null===(a=i.generalSettings.isaExtensions)||void 0===a?void 0:a.includes("F"),children:Object(I.jsx)(y.a,{label:"Standard Extension for Single-Precision Floating-Point",children:Object(I.jsxs)(d.a,{as:"span",children:["F ",Object(I.jsx)(R.a,{})]})})}),Object(I.jsx)(H.a,{value:"B",isDisabled:"MIPSI"===i.generalSettings.isa,isChecked:null===(r=i.generalSettings.isaExtensions)||void 0===r?void 0:r.includes("B"),children:Object(I.jsx)(y.a,{label:"Standard Extension for Bit Manipulation",children:Object(I.jsxs)(d.a,{as:"span",children:["B ",Object(I.jsx)(R.a,{})]})})})]})})]})]})}var X=n(14),Y=n(189),$=n(112);function q(e){var t=e.configuratorGlobalSettings,n=e.setConfiguratorGlobalSettings,a=e.configurationParametersSubset,r=e.userChangedStages,i=e.setUserChangedStages,o=e.mustBeMonotonicallyNonDecreasing,s=void 0!==o&&o,c=v.filter((function(e){return a.includes(e.jsonKey)}));function l(e,a,o,l){var d=Object(g.a)({},t.settings);if(l||0===l?d[a]!==l&&(a.endsWith("_stage")&&i&&!r.includes(a)&&i([].concat(Object(X.a)(r),[a])),!t.settings[a]&&0!==t.settings[a]&&(null===e||void 0===e?void 0:e.defaultValue)&&(null===e||void 0===e?void 0:e.type)===O&&(l+=e.defaultValue),d[a]=l):(a.endsWith("_stage")&&i&&i(r.filter((function(e){return e!==a}))),delete d[a]),s){var u=c.indexOf(e),b=Object(X.a)(r);c.slice(u+1).forEach((function(e){r.includes(e.jsonKey)&&!("ld_return_align"===e.jsonKey?d[e.jsonKey]<(d.execute_stage||0)-(d.next_pc_stage||0):d[e.jsonKey]<l)||(d[e.jsonKey]=l,b.includes(e.jsonKey)||b.push(e.jsonKey))})),i(b)}a.endsWith("_stage")?n(Object(g.a)(Object(g.a)({},t),{},{settings:d,generalSettings:Object(g.a)(Object(g.a)({},t.generalSettings),{},{depth:""})})):n(Object(g.a)(Object(g.a)({},t),{},{settings:d}))}var u=function(e){return Object(I.jsx)(I.Fragment,{children:e.description?Object(I.jsx)(M.a,{mb:2,children:Object(I.jsx)(y.a,{label:e.description,fontSize:"md",children:Object(I.jsxs)(d.a,{as:"span",borderBottomStyle:"dashed",borderBottomWidth:1.5,children:[e.readableName,Object(I.jsx)(R.a,{ml:2,mb:1})]})})}):Object(I.jsx)(M.a,{mb:2,children:e.readableName})})};return Object(I.jsx)($.ErrorBoundary,{children:Object(I.jsx)(d.a,{children:c.map((function(e,n){var a=e.jsonKey;return e.type===O?Object(I.jsxs)(L.a,{mb:3,isInvalid:e.validator&&void 0!==t.settings[a]&&t.settings[a]&&!e.validator(t.settings[a],e),children:[u(e),Object(I.jsxs)(Y.c,{maxW:100,step:1,isDisabled:"cores"===a&&"MIPSI"===t.generalSettings.isa,min:n>0&&a.endsWith("_stage")?t.settings[c[n-1].jsonKey]||e.min:"ld_return_align"===a?t.settings.execute_stage-t.settings.next_pc_stage:e.min,max:e.max,onChange:function(t,n){return l(e,e.jsonKey,0,n)},value:t.settings[a]||0===t.settings[a]?t.settings[a]:"",children:[Object(I.jsx)(Y.d,{placeholder:e.defaultValue}),Object(I.jsxs)(Y.e,{children:[Object(I.jsx)(Y.b,{}),Object(I.jsx)(Y.a,{})]})]})]},e.jsonKey):e.type===Boolean?Object(I.jsxs)(L.a,{mb:3,isInvalid:e.validator&&void 0!==t.settings[a]&&t.settings[a]&&!e.validator(t.settings[a],e),children:[u(e),Object(I.jsx)(H.a,{onChange:function(t){return l(e,e.jsonKey,0,t.target.checked)},value:t.settings[a]||""})]},e.jsonKey):e.type===x?Object(I.jsxs)(L.a,{mb:3,children:[u(e),Object(I.jsx)(W.a,{onChange:function(t){return l(e,e.jsonKey,0,"None"===t?null:t)},value:t.settings[e.jsonKey]||"None",defaultValue:"None",children:Object(I.jsxs)(f.b,{direction:"row",children:[e.possibleValues.map((function(e){return Object(I.jsx)(G.a,{value:e,children:e},e)})),Object(I.jsx)(G.a,{value:"None",children:"None"})]})})]},e.jsonKey):null}))})})}var Z=n(179),Q=n(113);function ee(e){var t=e.generalSettings,n=e.onFormattingChange,a=e.onVersionChange;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(d.a,{mb:5,children:Object(I.jsxs)(L.a,{mb:5,children:[Object(I.jsx)(M.a,{children:"WARP-V Version URL"}),Object(I.jsx)(Z.a,{value:t.warpVVersion,placeholder:"WARP-V version URL",as:Q.DebounceInput,debounceTimeout:300,mb:3,onChange:function(e){return a(e.target.value)}}),Object(I.jsxs)(J.a,{value:[Me(We),Me(Ge)].includes(t.warpVVersion)?[t.warpVVersion]:[],children:[Object(I.jsx)(H.a,{onChange:function(){return a(Me(Ge))},value:Me(Ge),mr:4,isDisabled:t.warpVVersion===Ge,children:"Set to latest"}),Object(I.jsxs)(H.a,{onChange:function(){return a(Me(We))},value:Me(We),isDisabled:t.warpVVersion===We,children:["Set to latest tested version (",We.substring(0,6),"...)"]})]})]})}),Object(I.jsxs)(L.a,{mb:5,children:[Object(I.jsx)(M.a,{children:"Verilog/SystemVerilog Formatting"}),Object(I.jsx)(J.a,{value:t.formattingSettings,onChange:n,children:Object(I.jsxs)(f.b,{direction:"column",children:[Object(I.jsx)(H.a,{value:"--hdl verilog",children:"Verilog (vs. SystemVerilog)"}),Object(I.jsx)(H.a,{value:"--bestsv",children:"Optimize SystemVerilog code for readability (versus preserving line association with TL-Verilog source)."}),Object(I.jsx)(H.a,{value:"--fmtNoSource",children:"Disable \\source tags in TL-Verilog. (Note, this is not an option in Makerchip.)"}),Object(I.jsx)(H.a,{value:"--noline",children:"Disable `line directive in SV output."}),Object(I.jsx)(H.a,{value:"--clkAlways",children:"Use the global/free-running clock for all flip-flops."}),Object(I.jsx)(H.a,{value:"--clkEnable",children:"Use enable flip-flops, not clock gating. (Good for FPGAs.)"}),Object(I.jsx)(H.a,{value:"--clkStageAlways",children:"Apply clock gating/enabling only to the first of a series of flip-flops. Generally this will be less area, higher power."}),Object(I.jsx)(H.a,{value:"--fmtDeclSingleton",children:" Each HDL signal is declared in its own declaration statement with its own type specification."}),Object(I.jsx)(H.a,{value:"--fmtDeclUnifiedHier",children:"Declare signals in a unified design hierarchy in the generated file, as opposed to inline with scope lines in the translated file. (No impact if --fmtFlatSignals.)"}),Object(I.jsx)(H.a,{value:"--fmtEscapedNames",children:"Use escaped HDL names that resemble TLV names as closely as possible."}),Object(I.jsx)(H.a,{value:"--fmtFlatSignals",children:"Declare signals at the top level scope in the generated file, and do not use hierarchical signal references."}),Object(I.jsx)(H.a,{value:"--fmtFullHdlHier",children:"Provide HDL hierarchy for all scopes, including non-replicated scopes."}),Object(I.jsx)(H.a,{value:"--fmtInlineInjection",children:"Provide X-injection and state recirculation for assignments under 'when' conditions in the assignment expressions themself where possible, rather than in separate manufactured assignments."}),Object(I.jsx)(H.a,{value:"--fmtNoRespace",children:"Preserve whitespace in HDL expressions as is. Do not adjust whitespace to preserve alignment of elements and comments of the expression."}),Object(I.jsx)(H.a,{value:"--fmtPackAll",children:"Generate HDL signals as packed at all levels of hierarchy. Also, forces behavior of --fmtFlatSignals."}),Object(I.jsx)(H.a,{value:"--fmtPackBooleans",children:"Pack an additional level of hierarchy for boolean HDL signals. "}),Object(I.jsx)(H.a,{value:"--fmtStripUniquifiers",children:"Eliminate the use of uniquifiers in HDL names where possible."}),Object(I.jsx)(H.a,{value:"--fmtUseGenerate",children:"Use the generate/endgenerate keywords that are optional in SystemVerilog."}),Object(I.jsx)(H.a,{value:"--noDirectiveComments",children:"For strict adherence to the Verilog specification, do not output comments on `line and `include lines."}),Object(I.jsx)(H.a,{value:"--inlineGen",style:{visibility:"hidden"},children:"Produce generated content inline in the primary output file rather than in a separate file."})]})})]})]})}var te=n(180);function ne(e){var t=e.configuratorGlobalSettings,n=e.setConfiguratorGlobalSettings,a=e.programText,r=e.setProgramText;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(d.a,{children:[Object(I.jsxs)(f.b,{direction:"column",children:[Object(I.jsx)(H.a,{value:t.generalSettings.customProgramEnabled,isDisabled:"MIPSI"===t.generalSettings.isa,onChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{generalSettings:Object(g.a)(Object(g.a)({},t.generalSettings),{},{customProgramEnabled:e.target.checked})}))},children:"Enable custom program"}),Object(I.jsx)(H.a,{mb:5,value:t.generalSettings.customInstructionsEnabled,isDisabled:"MIPSI"===t.generalSettings.isa,onChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{generalSettings:Object(g.a)(Object(g.a)({},t.generalSettings),{},{customInstructionsEnabled:e.target.checked})}))},children:"Include template for custom instructions"})]}),Object(I.jsx)(h.a,{mb:2,children:"Here, you can provide your own assembly program that will be hardcoded into the instruction memory of your core. The syntax roughly mimics that defined by the RISC-V ISA, but not exactly."}),Object(I.jsx)(te.a,{rows:a.split("\n").length,isDisabled:!t.generalSettings.customProgramEnabled,value:a,onChange:function(e){return r(e.target.value)},fontFamily:"'Courier New', monospace"})]})})}function ae(e){var t=e.configuratorGlobalSettings,n=e.setConfiguratorGlobalSettings,a=e.formErrors,r=e.generalSettings,i=e.onFormattingChange,o=e.onVersionChange,s=e.programText,c=e.setProgramText,l=e.settings,u=e.userChangedStages,b=e.userChangedStages1;return Object(I.jsxs)(d.a,{mt:5,mb:15,mx:"auto",maxW:"100vh",pb:10,borderBottomWidth:2,children:[Object(I.jsx)(m.a,{size:"lg",mb:4,children:"Configure your CPU now"}),Object(I.jsxs)(B.e,{borderWidth:1,borderRadius:"lg",p:3,isFitted:!0,children:[Object(I.jsxs)(B.b,{className:"tab-list",children:[Object(I.jsx)(B.a,{children:"General"}),Object(I.jsx)(B.a,{children:"Multi-Core"}),Object(I.jsx)(B.a,{children:"Pipeline"}),Object(I.jsx)(B.a,{children:"Components"}),Object(I.jsx)(B.a,{children:"Hazards"}),Object(I.jsx)(B.a,{children:"Memory"}),Object(I.jsx)(B.a,{children:"I/O"}),Object(I.jsx)(B.a,{children:"Verilog"}),Object(I.jsx)(B.a,{children:"Program"})]}),Object(I.jsxs)(B.d,{children:[Object(I.jsx)(B.c,{children:Object(I.jsx)(z,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,formErrors:a})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(q,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,configurationParametersSubset:l.cores&&l.cores>1?["cores","vcs","prios","max_packet_size"]:["cores"]})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(q,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,configurationParametersSubset:re,userChangedStages:u,setUserChangedStages:b,mustBeMonotonicallyNonDecreasing:!0})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(q,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,configurationParametersSubset:["branch_pred"]})}),Object(I.jsxs)(B.c,{children:[Object(I.jsxs)(F.a,{status:"info",mb:5,children:[Object(I.jsx)(F.c,{}),"EXTRA_*_BUBBLEs (0 or 1). Set to 1 to add a cycle to the replay condition and relax circuit timing. (Not all configurations are valid.)"]}),Object(I.jsx)(q,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,configurationParametersSubset:ie})]}),Object(I.jsx)(B.c,{children:Object(I.jsx)(h.a,{children:"WARP-V currently supports only the CPU core itself, with a small instruction memory and data memory."})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(h.a,{children:"WARP-V does not currently provide any I/O components."})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(ee,{generalSettings:r,onFormattingChange:i,onVersionChange:o})}),Object(I.jsx)(B.c,{children:Object(I.jsx)(ne,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,programText:s,setProgramText:c})})]})]})]})}var re=["ld_return_align"].concat(v.map((function(e){return e.jsonKey})).filter((function(e){return"branch_pred"!==e&&e.endsWith("_stage")}))),ie=v.filter((function(e){return e.jsonKey.startsWith("extra_")})).map((function(e){return e.jsonKey}));function oe(e){var t=e.configuratorGlobalSettings,n=e.setConfiguratorGlobalSettings,a=e.programText,r=e.setProgramText,i=e.userChangedStages,o=e.setUserChangedStages,s=e.formErrors;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(d.a,{textAlign:"center",mb:25,children:[Object(I.jsx)(j.a,{src:"warpv-logo.png",maxW:250,mx:"auto"}),Object(I.jsx)(h.a,{mb:2,children:"The open-source RISC-V core IP you can shape to your needs!"}),Object(I.jsxs)("video",{controls:!0,autoPlay:!0,muted:!0,loop:!0,style:{marginLeft:"auto",marginRight:"auto",width:"45%"},children:[Object(I.jsx)("source",{src:"WARP-V_VIZ.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]}),Object(I.jsx)(m.a,{textAlign:"center",size:"md",mb:5,children:"What CPU core can we build for you today?"}),Object(I.jsx)(p.a,{maxW:"fit-content",children:Object(I.jsxs)(f.a,{spacing:25,flexWrap:"wrap",mx:"auto",mb:10,children:[Object(I.jsx)(se,{path:"warpv-core-small.png",info:"Low-Power, Low-Freq 1-cyc FPGA Implementation",mb:3}),Object(I.jsx)(d.a,{maxW:250,textAlign:"center",mb:3,children:Object(I.jsx)(h.a,{fontSize:36,children:"..."})}),Object(I.jsx)(se,{path:"warpv-core-big.png",info:"High-Freq 6-cyc ASIC Implementation",maxW:300,mb:3})]})}),Object(I.jsx)(ae,{configuratorGlobalSettings:t,setConfiguratorGlobalSettings:n,formErrors:s,settings:t.settings,userChangedStages:i,userChangedStages1:o,generalSettings:t.generalSettings,onFormattingChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{generalSettings:Object(g.a)(Object(g.a)({},t.generalSettings),{},{formattingSettings:e})}))},onVersionChange:function(e){return n(Object(g.a)(Object(g.a)({},t),{},{generalSettings:Object(g.a)(Object(g.a)({},t.generalSettings),{},{warpVVersion:e})}))},programText:a,setProgramText:r})]})}function se(e){var t=e.path,n=e.info,a=Object(b.a)(e,["path","info"]);return Object(I.jsxs)(d.a,{children:[Object(I.jsx)(j.a,Object(g.a)({src:t,mx:"auto"},a)),Object(I.jsx)(h.a,{mx:"auto",textAlign:"center",maxW:160,children:n})]})}var ce=n(181);function le(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(d.a,{textAlign:"center",mt:13,mb:10,mx:"auto",children:[Object(I.jsxs)(de,{to:"https://github.com/stevehoover/warp-v",mr:30,children:["Dig deeper or report bugs in the github repository ",Object(I.jsx)(_.a,{as:ce.a})]}),Object(I.jsxs)(de,{to:"https://www.redwoodeda.com",children:["Courtesy of",Object(I.jsx)(j.a,{mb:7,display:"inline",src:"rwedaLogo2.svg",w:"110px"})," ",Object(I.jsx)(_.a,{as:ce.a})]})]})})}function de(e){var t=e.to,n=e.children,a=Object(b.a)(e,["to","children"]);return Object(I.jsx)(S.a,Object(g.a)(Object(g.a)({href:t,fontWeight:"bold",fontSize:"lg",_hover:{bg:"blackAlpha.200"},target:"_blank"},a),{},{children:n}))}var ue=n(125),be=n(184),ge=n(169);function je(){return Object(I.jsx)(j.a,{src:"warpv-logo.png",w:125})}var he=n(183),me=n(93),pe=n(17);var fe=function(e){return Object(I.jsx)(pe.a.a,Object(g.a)({display:"block",textAlign:"center",py:"5",fontWeight:"bold",fontSize:"lg",_hover:{bg:"blackAlpha.200"},color:"white",w:"full"},e))},Oe=n(185),xe={init:{opacity:0,y:-4,display:"none",transition:{duration:0}},enter:{opacity:1,y:0,display:"block",transition:{duration:.15,staggerChildren:.1}},exit:{opacity:0,y:-4,transition:{duration:.1},transitionEnd:{display:"none"}}},ve=Object(Oe.a)(pe.a.li),Se=function(e){return Object(I.jsx)(ve,Object(g.a)({opacity:"0",initial:"init",variants:xe},e))},ye={exit:{opacity:0,y:4},enter:{opacity:1,y:0,transition:{duration:.3}}},_e=function(e){return Object(I.jsx)(Oe.a.li,Object(g.a)({variants:ye},e))},Ce=n(182),Ee=function(e){var t=Object(ue.c)().toggleColorMode,n=Object(ue.d)("dark","light"),a=Object(ue.d)(w.b,w.c);return Object(I.jsx)(Ce.a,Object(g.a)({size:"md",fontSize:"lg","aria-label":"Switch to ".concat(n," mode"),variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(I.jsx)(a,{})},e))},we=[{label:"Home",href:"/"},{label:"WARP-V Github",href:"https://github.com/stevehoover/warp-v",target:"_blank"},{label:"Redwood EDA, LLC",href:"https://redwoodeda.com",target:"_blank"}];var Te=function(e){var t=Object(s.a)(),n=t.isOpen,a=t.onToggle;return Object(I.jsxs)(d.a,Object(g.a)(Object(g.a)({},e),{},{children:[Object(I.jsx)(he.a,{as:"button",p:"2",fontSize:"2xl",color:"gray.700",onClick:a,children:n?Object(I.jsx)(me.b,{}):Object(I.jsx)(me.a,{})}),Object(I.jsx)(Se,{pos:"absolute",insetX:"0",bg:"blue.600",top:"64px",animate:n?"enter":"exit",children:Object(I.jsx)(f.b,{spacing:"0",divider:Object(I.jsx)(f.c,{borderColor:"whiteAlpha.200"}),children:we.map((function(e,t){return Object(I.jsx)(_e,{children:Object(I.jsx)(fe,{href:e.href,children:e.label})},t)}))})})]}))},Ie=function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(f.a,Object(g.a)({spacing:"8",align:"stretch"},e)),Object(I.jsx)(d.a,{ml:"auto",mr:15,children:Object(I.jsx)(Ee,{})})]})};function Pe(){return Object(I.jsx)(d.a,{mt:2,as:"header",height:"16",bg:Object(ue.d)("white","gray.800"),position:"relative",children:Object(I.jsx)(d.a,{height:"100%",maxW:"7xl",mx:"auto",ps:{base:"6",md:"8"},pe:{base:"5",md:"0"},mb:5,children:Object(I.jsxs)(be.a,{as:"nav","aria-label":"Site navigation",align:"center",height:"100%",children:[Object(I.jsxs)(d.a,{as:"a",href:"/",rel:"home",children:[Object(I.jsx)(ge.a,{children:"Redwood EDA, LLC"}),Object(I.jsx)(je,{h:"6",iconColor:Object(ue.d)("blue.600","blue.200")})]}),Object(I.jsx)(Ie,{ml:10,display:{base:"none",md:"flex"}}),Object(I.jsx)(Te,{display:{base:"flex",md:"none"}})]})})})}var Ne=n(94),Ae=n.n(Ne),Re=n(114),De=n(188);function Ve(e,t,n){if("RISCV"!==e.generalSettings.isa&&e.generalSettings.isaExtensions&&0!==e.generalSettings.isaExtensions.length){e.isaExtensions;t(Object(b.a)(e,["isaExtensions"]))}}function ke(e){var t,n,a,r,i,s=e.general,c=e.pipeline,l=[];(l.push("var(ISA, ".concat(s.isa,")")),"MIPSI"!==s.isa&&(null===(t=s.isaExtensions)||void 0===t||t.forEach((function(e){l.push("var(EXT_".concat(e,", 1)"))}))),"MIPSI"!==s.isa)&&((null===(n=s.isaExtensions)||void 0===n?void 0:n.includes("E"))||l.push("var(EXT_E, 0)"),(null===(a=s.isaExtensions)||void 0===a?void 0:a.includes("M"))||l.push("var(EXT_M, 0)"),(null===(r=s.isaExtensions)||void 0===r?void 0:r.includes("F"))||l.push("var(EXT_F, 0)"),(null===(i=s.isaExtensions)||void 0===i?void 0:i.includes("B"))||l.push("var(EXT_B, 0)"));return Object.entries(c).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1],r=v.find((function(e){return e.jsonKey===n}));if(!r)throw Error("Parameter ".concat(n," not found"));a&&r.validator&&!r.validator(a,r)?console.log("Parameter ".concat(n," failed validation")):l.push("".concat(r.macroType,"(").concat(r.verilogName,", ").concat(function(e,t){if("boolean"===typeof e)return e?"1'b1":"1'b0";if("number"===typeof e)return e;if("string"===typeof e)return"".concat(e)}(a,r.type),")"))})),l}function Ue(e,t,n,a,r){var i=new Set;r.formattingSettings.includes("--fmtPackAll")&&(i.add("/* verilator lint_on WIDTH */ // TODO: Disabling WIDTH to work around what we think is https://github.com/verilator/verilator/issues/1613"),i.delete("/* verilator lint_off WIDTH */"));var o=r.formattingSettings.filter((function(e){return"--fmtNoSource"!==e}));return"\\m5_TLV_version 1d".concat(o.length>0?" ".concat(o.join(" ")):"",": tl-x.org\n\\SV\n   /*\n   Copyright ").concat((new Date).getFullYear(),' Redwood EDA, LLC\n   \n   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n   \n   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n   \n   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n   */\n\\m5\n   use(m5-1.0)\n\n').concat(e?"   "+(r.customProgramEnabled?["var(PROG_NAME, ".concat(t,")")]:[]).concat(e).join("\n   "):"","\n\\SV\n   // Include WARP-V.\n   ").concat(0===i.size?"":Object(X.a)(i).join("\n   "),"\n   m4_include_lib(['").concat(r.warpVVersion,"'])\n").concat(r.customProgramEnabled?"\\m5\n   TLV_fn(".concat(a.toLowerCase(),"_").concat(t,"_prog, {\n      ~assemble(['\n         ").concat(n.split("\n").join("\n         "),"\n      '])\n   })"):"","\nm4+module_def()\n\\TLV\n   ").concat(r.customInstructionsEnabled?"// Instantiate WARP-V with custom instructions.\n   // For example, here we add byte add instructions, defining:\n   //   - their encoding (see similar in https://github.com/stevehoover/warp-v_includes/blob/master/risc-v_defs.tlv)\n   //   - logic to assign their result value (see similar in https://github.com/stevehoover/warp-v/blob/master/warp-v.tlv).\n   m5+warpv_with_custom_instructions(\n      ['R, 32, I, 01110, 000, 0000000, BADD'],\n      ['I, 32, I, 00110, 000, BADDI'],\n      \\TLV\n         $badd_rslt[31:0] = {24'b0, /src[1]$reg_value[7:0] + /src[2]$reg_value[7:0]};\n         $baddi_rslt[31:0] = {24'b0, /src[1]$reg_value[7:0] + $raw_i_imm[7:0]};\n      )":"m5+warpv_top()","\n\\SV\n   endmodule\n")}function Be(e){var t=e.programText,n=e.children,r=e.coreJson,i=e.macrosForJson,s=e.tlvForJson,c=e.setMacrosForJson,l=e.setTlvForJson,u=e.configuratorCustomProgramName,b=e.configuratorGlobalSettings,h=e.sVForJson,p=e.setSVForJson,O=e.setConfiguratorGlobalSettings,x=e.setCoreJson,v=e.makerchipOpening,S=e.openInMakerchipUrl,y=e.openInMakerchipDisclosure,_=e.selectedFile,E=e.setSelectedFile,w=e.detailsComponentRef,T=e.userChangedStages,R=e.setPipelineDefaultDepth,D=e.setUserChangedStages,V=e.pipelineDefaultDepth,k=e.downloadingCode,B=e.setFormErrors,F=e.formErrors,L=e.setMakerchipOpening,M=e.setDownloadingCode,W=e.setOpenInMakerchipUrl,G=function(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(Date.now()),c=Object(o.a)(s,2),l=c[0],d=c[1];return Object(a.useEffect)((function(){r||null===l||d(null)}),[r]),{get:function(t){return new Promise((function(n,a){fetch(e+t).then((function(e){return e.json()})).then((function(e){if(!e)return i(!1),a(e);i(!1),n(e)})).catch((function(e){i(!1),a(e)}))}))},post:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a?new URLSearchParams:JSON.stringify(n);if(a)for(var s=0,c=Object.entries(n);s<c.length;s++){var l=Object(o.a)(c[s],2),d=l[0],u=l[1];r.append(d,u)}return new Promise((function(n,a){fetch(e+t,Object(g.a)({},{method:"post",body:r,headers:{"Content-Type":"text/plain"},mode:"cors"})).then((function(e){var t=e.json();if(!t)return i(!1),a(t);i(!1),e.status>=400&&e.status<600?a(t):n(t)})).catch((function(e){i(!1),a(e)}))}))},loading:r,loadingTime:l}}("https://faas.makerchip.com"),K=Object(De.a)();function J(e,t){return H.apply(this,arguments)}function H(){return(H=Object(Re.a)(Ae.a.mark((function e(t,n){var a,r,i,o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.generalSettings.formattingSettings.filter((function(e){return"--fmtNoSource"===e})),r="-i test.tlv -o test.sv --m4out out/m4out ".concat(a.join(" ")," --iArgs"),e.next=4,G.post("/function/sandpiper-faas",{args:r,responseType:"json",sv_url_inc:!0,files:{"test.tlv":t}},!1).catch((function(e){return K({title:"Compilation fetch failed",status:"error"}),console.error(e),{"out/m4out":"// Compilation failed.","out/test.sv":"// Compilation failed.","out/test_gen.sv":"// Compilation failed."}}));case 4:(i=e.sent)["out/m4out"]?l(i["out/m4out"].replaceAll("\n\n","\n").replace("[\\source test.tlv]","")):K({title:"Failed compilation",status:"error"}),c(t.split("\n")),i["out/test.sv"]&&(o=i["out/test.sv"].replace('`include "test_gen.sv"',"// gen included here\n"+i["out/test_gen.sv"]).split("\n").filter((function(e){return!e.startsWith('`include "sp_default.vh"')})).join("\n"),n(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){if(!e){Ve(b,O);var t={general:b.generalSettings,pipeline:b.settings};return JSON.stringify(r)!==JSON.stringify(t)&&x(t),!0}if(b.generalSettings.depth||F.includes("depth")){0!==F.length&&B([]),Ve(b,O);var n={general:b.generalSettings,pipeline:b.settings};return JSON.stringify(r)!==JSON.stringify(n)&&x(n),!0}return B([].concat(Object(X.a)(F),["depth"])),null}function Y(e){W(e),y.onOpen()}return Object(a.useEffect)((function(){if(r){if(r||!i&&!s){var e=Ue(ke(r),u,t,b.generalSettings.isa,b.generalSettings);c(e.split("\n"));var n=setTimeout((function(){J(e,(function(e){p(e)}))}),250);return function(){clearTimeout(n)}}c(null),l(null)}}),[JSON.stringify(r)]),Object(a.useEffect)((function(){z(!1);b.generalSettings.depth&&(b.needsPipelineInit||V!==b.generalSettings.depth)&&function(e,t){var n;1===e?n={next_pc_stage:0,fetch_stage:0,decode_stage:0,branch_pred_stage:0,register_rd_stage:0,execute_stage:0,result_stage:0,register_wr_stage:0,mem_wr_stage:0,ld_return_align:1,branch_pred:"fallthrough"}:2===e?n={next_pc_stage:0,fetch_stage:0,decode_stage:0,branch_pred_stage:0,register_rd_stage:0,execute_stage:1,result_stage:1,register_wr_stage:1,mem_wr_stage:1,ld_return_align:2,branch_pred:"two_bit"}:4===e?n={next_pc_stage:0,fetch_stage:0,decode_stage:1,branch_pred_stage:1,register_rd_stage:1,execute_stage:2,result_stage:2,register_wr_stage:3,mem_wr_stage:3,extra_replay_bubble:0,ld_return_align:4,branch_pred:"two_bit"}:6===e&&(n={next_pc_stage:1,fetch_stage:1,decode_stage:3,branch_pred_stage:4,register_rd_stage:4,execute_stage:5,result_stage:5,register_wr_stage:6,mem_wr_stage:7,extra_replay_bubble:0,ld_return_align:7,branch_pred:"two_bit"});var a=Object(g.a)({},b.settings),r=Object(X.a)(T);0!==Object.entries(n).length&&(Object.entries(n).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];a[n]=i,r.includes(n)||r.push(n)})),R(e),D(r),O(Object(g.a)(Object(g.a)({},b),{},{settings:a,needsPipelineInit:!1})))}(b.generalSettings.depth)}),[b.generalSettings.depth]),Object(a.useEffect)((function(){Ve(b,O);var e={general:b.generalSettings,pipeline:b.settings};JSON.stringify(r)!==JSON.stringify(e)&&x(e)}),[b.generalSettings,b.settings]),Object(I.jsxs)(I.Fragment,{children:[n,Object(I.jsxs)(d.a,{mt:5,mb:15,mx:"auto",maxW:"100vh",pb:10,borderBottomWidth:2,children:[Object(I.jsx)(m.a,{size:"lg",mb:4,children:"Get your code:"}),Object(I.jsxs)(f.a,{mb:3,children:[Object(I.jsx)(C.a,{type:"button",colorScheme:"blue",onClick:function(){var e;E("m4"),null===w||void 0===w||null===(e=w.current)||void 0===e||e.scrollIntoView()},children:"View Below"}),Object(I.jsx)(d.a,{children:Object(I.jsx)(C.a,{type:"button",colorScheme:"teal",onClick:function(){if(z(!0)){var e=z(!0);e&&O(Object(g.a)(Object(g.a)({},b),{},{coreJson:e})),M(!0),J(Ue(ke(r),u,t,b.generalSettings.isa,b.generalSettings),(function(e){P(!1,"verilog.sv",e),M(!1)}))}},isLoading:k,isDisabled:k,children:"Download Verilog"})}),Object(I.jsx)(C.a,{type:"button",colorScheme:"blue",onClick:function(){z(!0)&&(L(!0),A(Ue(ke(r),u,t,b.generalSettings.isa,b.generalSettings),L,Y))},isLoading:v,isDisabled:v,children:"Open in Makerchip IDE"})]}),Object(I.jsx)(j.a,{src:"makerchip-preview.png",w:"350px"})]}),Object(I.jsx)(U,{coreJson:r,tlvForJson:s,macrosForJson:i,sVForJson:h,selectedFile:_,setSelectedFile:E,setDiscloureAndUrl:Y}),Object(I.jsx)(N,{url:S,disclosure:y})]})}var Fe="# /=====================\\\n# | Count to 10 Program |\n# \\=====================/\n#\n# Default program for RV32I test\n# Add 1,2,3,...,9 (in that order).\n# Store incremental results in memory locations 0..9. (1, 3, 6, 10, ...)\n#\n# Regs:\n# t0: cnt\n# a2: ten\n# a0: out\n# t1: final value\n# a1: expected result\n# t2: store addr\nreset:\n   ORI t2, zero, 0          #     store_addr = 0\n   ORI t0, zero, 1          #     cnt = 1\n   ORI a2, zero, 10         #     ten = 10\n   ORI a0, zero, 0          #     out = 0\nloop:\n   ADD a0, t0, a0           #  -> out += cnt\n   SW a0, 0(t2)             #     store out at store_addr\n   ADDI t0, t0, 1           #     cnt++\n   ADDI t2, t2, 4           #     store_addr++\n   BLT t0, a2, loop         #  ^- branch back if cnt < 10\n# Result should be 0x2d.\n   LW t1, -4(t2)            #     load the final value\n   ADDI a1, zero, 0x2d      #     expected result (0x2d)\n   BEQ t1, a1, pass         #     pass if as expected\n\n   # Branch to one of these to report pass/fail to the default testbench.\nfail:\n   ADD a1, a1, zero         #     nop fail\npass:\n   ADD t1, t1, zero         #     nop pass\n",Le=function(){var e=Object(a.useState)({settings:function(){var e={cores:1};return v.forEach((function(t){return e[t.jsonKey]=t.defaultValue})),e}(),coreJson:null,generalSettings:{warpVVersion:Me(We),isa:"RISCV",isaExtensions:[],depth:4,formattingSettings:["--inlineGen","--bestsv","--noline","--fmtNoSource","--noDirectiveComments"],customProgramEnabled:!1,customInstructionsEnabled:!1},needsPipelineInit:!0}),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),b=Object(o.a)(i,2),g=b[0],j=b[1],h=Object(a.useState)(),m=Object(o.a)(h,2),p=m[0],f=m[1],O=Object(a.useState)(),x=Object(o.a)(O,2),S=x[0],y=x[1],_=Object(a.useState)(null),C=Object(o.a)(_,2),E=C[0],w=C[1],T=Object(a.useState)("my_custom"),P=Object(o.a)(T,2),N=P[0],A=(P[1],Object(a.useState)(Fe)),R=Object(o.a)(A,2),D=R[0],V=R[1],k=Object(a.useState)([]),U=Object(o.a)(k,2),B=U[0],F=U[1],L=Object(a.useState)([]),M=Object(o.a)(L,2),W=M[0],G=M[1],K=Object(a.useState)(),J=Object(o.a)(K,2),H=J[0],z=J[1],X=Object(a.useState)(!1),Y=Object(o.a)(X,2),$=Y[0],q=Y[1],Z=Object(a.useState)(!1),Q=Object(o.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.createRef)(),ae=Object(a.useState)("m4"),re=Object(o.a)(ae,2),ie=re[0],se=re[1],ce=Object(s.a)(),de=Object(a.useState)(),ue=Object(o.a)(de,2),be=ue[0],ge=ue[1];return Object(I.jsx)(c.a,{theme:l.theme,children:Object(I.jsxs)(d.a,{minHeight:"480px",children:[Object(I.jsx)(Pe,{}),Object(I.jsx)(d.a,{mx:5,overflowWrap:!0,children:Object(I.jsx)(u.c,{children:Object(I.jsx)(u.a,{exact:!0,path:"/",children:Object(I.jsx)(Be,{programText:D,setProgramText:V,formErrors:B,setFormErrors:F,tlvForJson:p,sVForJson:g,selectedFile:ie,setSelectedFile:se,setUserChangedStages:G,userChangedStages:W,downloadingCode:ee,detailsComponentRef:ne,openInMakerchipDisclosure:ce,openInMakerchipUrl:be,makerchipOpening:$,configuratorCustomProgramName:N,configuratorGlobalSettings:n,setConfiguratorGlobalSettings:r,coreJson:E,setCoreJson:w,macrosForJson:S,setMacrosForJson:y,setSVForJson:j,setTlvForJson:f,pipelineDefaultDepth:H,setPipelineDefaultDepth:z,setDownloadingCode:te,setMakerchipOpening:q,setOpenInMakerchipUrl:ge,children:Object(I.jsx)(oe,{configuratorGlobalSettings:n,setConfiguratorGlobalSettings:r,programText:D,setProgramText:V,userChangedStages:W,setUserChangedStages:G,formErrors:B})})})})}),Object(I.jsx)(le,{})]})})};function Me(e){return"https://raw.githubusercontent.com/stevehoover/warp-v/".concat(e,"/warp-v.tlv")}var We="92121a3ca0acb3d711a5779b50dc9550ea999f9b",Ge="master",Ke=n(88);n(150);i.a.render(Object(I.jsx)(a.StrictMode,{children:Object(I.jsx)(Ke.a,{children:Object(I.jsx)(Le,{})})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.43976172.chunk.js.map